{% extends "events/base.html" %}
{% block title %}
Event Detail
{% endblock %}
{% block content %}
<div class="container">
   <h1>{{ event.name }}</h1>
   <p>{{ event.description }}</p>

   <h3>Event Dates</h3>
   <ul>
       {% for event_date in event.event_dates.all %}
           <li>{{ event_date.date }}</li>
           <h4>Agenda for {{ event_date.date }}</h4>
           <ul>
               {% for agenda in event_date.agendas.all %}
                   <li>{{ agenda.title }} ({{ agenda.start_time }} - {{ agenda.end_time }})</li>
               {% endfor %}
           </ul>
       {% endfor %}
   </ul>

   <h3>Event Images</h3>
   <div class="row">
       {% for image in event.images.all %}
           <div class="col-md-3">
               <img src="{{ image.image.url }}" class="img-fluid" alt="{{ event.name }}">
           </div>
       {% endfor %}
   </div>

   {% if user.is_authenticated %}
       {% if user_registered %}
           <div class="alert alert-info mt-4">You have been registered for this event.</div>
       {% else %}
           <a href="{% url 'events:register_event' event.id %}" class="btn btn-success mt-4">Register for this Event</a>
       {% endif %}
   {% else %}
       <div class="alert alert-warning mt-4">Please <a href="{% url 'login' %}">login</a> to register for this event.</div>
   {% endif %}
</div>
{% endblock %}